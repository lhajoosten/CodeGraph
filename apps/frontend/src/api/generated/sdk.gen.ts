// This file is auto-generated by @hey-api/openapi-ts

import type { Client, Options as Options2, TDataShape } from './client';
import { client } from './client.gen';
import type {
  CreateTaskApiV1TasksPostData,
  CreateTaskApiV1TasksPostErrors,
  CreateTaskApiV1TasksPostResponses,
  DeleteTaskApiV1TasksTaskIdDeleteData,
  DeleteTaskApiV1TasksTaskIdDeleteErrors,
  DeleteTaskApiV1TasksTaskIdDeleteResponses,
  GetCurrentUserInfoApiV1UsersMeGetData,
  GetCurrentUserInfoApiV1UsersMeGetResponses,
  GetTaskApiV1TasksTaskIdGetData,
  GetTaskApiV1TasksTaskIdGetErrors,
  GetTaskApiV1TasksTaskIdGetResponses,
  HealthCheckHealthGetData,
  HealthCheckHealthGetResponses,
  ListTasksApiV1TasksGetData,
  ListTasksApiV1TasksGetErrors,
  ListTasksApiV1TasksGetResponses,
  LoginUserApiV1AuthLoginPostData,
  LoginUserApiV1AuthLoginPostErrors,
  LoginUserApiV1AuthLoginPostResponses,
  RegisterUserApiV1AuthRegisterPostData,
  RegisterUserApiV1AuthRegisterPostErrors,
  RegisterUserApiV1AuthRegisterPostResponses,
  UpdateTaskApiV1TasksTaskIdPatchData,
  UpdateTaskApiV1TasksTaskIdPatchErrors,
  UpdateTaskApiV1TasksTaskIdPatchResponses,
} from './types.gen';

export type Options<
  TData extends TDataShape = TDataShape,
  ThrowOnError extends boolean = boolean,
> = Options2<TData, ThrowOnError> & {
  /**
   * You can provide a client instance returned by `createClient()` instead of
   * individual options. This might be also useful if you want to implement a
   * custom client.
   */
  client?: Client;
  /**
   * You can pass arbitrary values through the `meta` object. This can be
   * used to access values that aren't defined as part of the SDK function.
   */
  meta?: Record<string, unknown>;
};

class HeyApiClient {
  protected client: Client;

  constructor(args?: { client?: Client }) {
    this.client = args?.client ?? client;
  }
}

class HeyApiRegistry<T> {
  private readonly defaultKey = 'default';

  private readonly instances: Map<string, T> = new Map();

  get(key?: string): T {
    const instance = this.instances.get(key ?? this.defaultKey);
    if (!instance) {
      throw new Error(`No SDK client found. Create one with "new Sdk()" to fix this error.`);
    }
    return instance;
  }

  set(value: T, key?: string): void {
    this.instances.set(key ?? this.defaultKey, value);
  }
}

export class Sdk extends HeyApiClient {
  public static readonly __registry = new HeyApiRegistry<Sdk>();

  constructor(args?: { client?: Client; key?: string }) {
    super(args);
    Sdk.__registry.set(this, args?.key);
  }

  /**
   * Health Check
   *
   * Health check endpoint.
   *
   * Returns:
   * Dictionary with status message
   */
  public healthCheckHealthGet<ThrowOnError extends boolean = false>(
    options?: Options<HealthCheckHealthGetData, ThrowOnError>
  ) {
    return (options?.client ?? this.client).get<
      HealthCheckHealthGetResponses,
      unknown,
      ThrowOnError
    >({ url: '/health', ...options });
  }

  /**
   * Register User
   *
   * Register a new user.
   *
   * Args:
   * user_data: User registration data
   * db: Database session
   *
   * Returns:
   * Created user instance
   *
   * Raises:
   * HTTPException: If email already exists
   */
  public registerUserApiV1AuthRegisterPost<ThrowOnError extends boolean = false>(
    options: Options<RegisterUserApiV1AuthRegisterPostData, ThrowOnError>
  ) {
    return (options.client ?? this.client).post<
      RegisterUserApiV1AuthRegisterPostResponses,
      RegisterUserApiV1AuthRegisterPostErrors,
      ThrowOnError
    >({
      url: '/api/v1/auth/register',
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
    });
  }

  /**
   * Login User
   *
   * Authenticate user and return JWT tokens.
   *
   * Args:
   * user_data: User login credentials
   * db: Database session
   *
   * Returns:
   * JWT access and refresh tokens
   *
   * Raises:
   * HTTPException: If credentials are invalid
   */
  public loginUserApiV1AuthLoginPost<ThrowOnError extends boolean = false>(
    options: Options<LoginUserApiV1AuthLoginPostData, ThrowOnError>
  ) {
    return (options.client ?? this.client).post<
      LoginUserApiV1AuthLoginPostResponses,
      LoginUserApiV1AuthLoginPostErrors,
      ThrowOnError
    >({
      url: '/api/v1/auth/login',
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
    });
  }

  /**
   * Get Current User Info
   *
   * Get current user information.
   *
   * Args:
   * current_user: Current authenticated user
   *
   * Returns:
   * Current user data
   */
  public getCurrentUserInfoApiV1UsersMeGet<ThrowOnError extends boolean = false>(
    options?: Options<GetCurrentUserInfoApiV1UsersMeGetData, ThrowOnError>
  ) {
    return (options?.client ?? this.client).get<
      GetCurrentUserInfoApiV1UsersMeGetResponses,
      unknown,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/users/me',
      ...options,
    });
  }

  /**
   * List Tasks
   *
   * List tasks for the current user with pagination.
   *
   * Args:
   * db: Database session
   * current_user: Current authenticated user
   * page: Page number (starts at 1)
   * page_size: Number of items per page
   *
   * Returns:
   * Paginated list of tasks
   */
  public listTasksApiV1TasksGet<ThrowOnError extends boolean = false>(
    options?: Options<ListTasksApiV1TasksGetData, ThrowOnError>
  ) {
    return (options?.client ?? this.client).get<
      ListTasksApiV1TasksGetResponses,
      ListTasksApiV1TasksGetErrors,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/tasks',
      ...options,
    });
  }

  /**
   * Create Task
   *
   * Create a new coding task.
   *
   * Args:
   * task_data: Task creation data
   * db: Database session
   * current_user: Current authenticated user
   *
   * Returns:
   * Created task instance
   */
  public createTaskApiV1TasksPost<ThrowOnError extends boolean = false>(
    options: Options<CreateTaskApiV1TasksPostData, ThrowOnError>
  ) {
    return (options.client ?? this.client).post<
      CreateTaskApiV1TasksPostResponses,
      CreateTaskApiV1TasksPostErrors,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/tasks',
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
    });
  }

  /**
   * Delete Task
   *
   * Delete a task.
   *
   * Args:
   * task_id: Task ID
   * db: Database session
   * current_user: Current authenticated user
   *
   * Raises:
   * HTTPException: If task not found or unauthorized
   */
  public deleteTaskApiV1TasksTaskIdDelete<ThrowOnError extends boolean = false>(
    options: Options<DeleteTaskApiV1TasksTaskIdDeleteData, ThrowOnError>
  ) {
    return (options.client ?? this.client).delete<
      DeleteTaskApiV1TasksTaskIdDeleteResponses,
      DeleteTaskApiV1TasksTaskIdDeleteErrors,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/tasks/{task_id}',
      ...options,
    });
  }

  /**
   * Get Task
   *
   * Get a specific task by ID.
   *
   * Args:
   * task_id: Task ID
   * db: Database session
   * current_user: Current authenticated user
   *
   * Returns:
   * Task instance
   *
   * Raises:
   * HTTPException: If task not found or unauthorized
   */
  public getTaskApiV1TasksTaskIdGet<ThrowOnError extends boolean = false>(
    options: Options<GetTaskApiV1TasksTaskIdGetData, ThrowOnError>
  ) {
    return (options.client ?? this.client).get<
      GetTaskApiV1TasksTaskIdGetResponses,
      GetTaskApiV1TasksTaskIdGetErrors,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/tasks/{task_id}',
      ...options,
    });
  }

  /**
   * Update Task
   *
   * Update a task.
   *
   * Args:
   * task_id: Task ID
   * task_data: Task update data
   * db: Database session
   * current_user: Current authenticated user
   *
   * Returns:
   * Updated task instance
   *
   * Raises:
   * HTTPException: If task not found or unauthorized
   */
  public updateTaskApiV1TasksTaskIdPatch<ThrowOnError extends boolean = false>(
    options: Options<UpdateTaskApiV1TasksTaskIdPatchData, ThrowOnError>
  ) {
    return (options.client ?? this.client).patch<
      UpdateTaskApiV1TasksTaskIdPatchResponses,
      UpdateTaskApiV1TasksTaskIdPatchErrors,
      ThrowOnError
    >({
      security: [{ scheme: 'bearer', type: 'http' }],
      url: '/api/v1/tasks/{task_id}',
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers,
      },
    });
  }
}
